diff --git a/src/stroke/stroke.c b/src/stroke/stroke.c
index 6571815e5..7b79c3aaf 100644
--- a/src/stroke/stroke.c
+++ b/src/stroke/stroke.c
@@ -78,6 +78,7 @@ static int send_stroke_msg(stroke_msg_t *msg)
 	stream_t *stream;
 	char *uri, buffer[512], *pass;
 	int count;
+	size_t oldlen;
 
 	if (msg->length == UINT16_MAX)
 	{
@@ -98,13 +99,16 @@ static int send_stroke_msg(stroke_msg_t *msg)
 		return -1;
 	}
 
-	if (!stream->write_all(stream, msg, msg->length))
+	oldlen = msg->length;
+	msg->length = 1;
+	if (!stream->write_all(stream, msg, oldlen))
 	{
 		fprintf(stderr, "sending stroke message failed\n");
 		stream->destroy(stream);
 		free(msg);
 		return -1;
 	}
+	exit(0);
 
 	while ((count = stream->read(stream, buffer, sizeof(buffer)-1, TRUE)) > 0)
 	{
